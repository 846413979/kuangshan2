$define(["wgt_util","jquery.mediaQuery","md5"],function(p,a){var r=function(a,e){var o,t,n,i=e.defaultImage,s=e.definedDefaultImage;o=a,n=i,1==(t=s)||"true"==t?p(".js_thumb",o).onErrorImg(n):p(".js_thumb",o).onErrorImg();var d=2;if(e.isOpenCutMode&&(d=1),e.isRate){var r=e.widthOfRate/e.heightOfRate;p(".p_itemImgCon",a).putPhotoDiv(d,r)}else p(".p_itemImgCon",a).putPhotoDiv(d)};var u=function(e,o,a,t,n,i,s){var d={};d.request_url=a,d.url_param=t,d.requst_type=n||"GET";var r=encodeURIComponent(encodeURIComponent(JSON.stringify(d))),u=p.md5Sign(JSON.stringify(d));p.ajax({type:"POST",url:"/comp/portalRouter",async:s||s===undefined,data:{param:r,sign:u},success:function(a){i(a,e,o)},error:function(){}})};function f(a,t){if("200"==a.code){var e=JSON.parse(a.data);"200"==e.status&&p(".js_videoBox",t).each(function(a,o){"object"==typeof e.data?p.each(e.data,function(a,e){p(o).data("videoid")===e.id&&p(".js_playNum",t).length&&p(".js_playNum",t).html(e.playNum)}):"number"==typeof e.data&&p(".js_playNum",t).length&&p(".js_playNum",t).html(e.data)})}}return{init:function(){params=this._params;var a,e,o=$compCl.getScope(params.id);params.picParams.appId;p.mediaQuery({callback1024:function(){o.find(".p_aHrefPageBox").removeClass("background_form"),o.find(".p_s_page").removeClass("borderR_default")},callback7681024:function(){o.find(".p_aHrefPageBox").removeClass("background_form"),o.find(".p_s_page").removeClass("borderR_default")},callback768:function(){o.find(".p_aHrefPageBox").addClass("background_form"),o.find(".p_s_page").addClass("borderR_default")}}),r(o,params.picParams),a=o,(e=params.textParams).isCutOfSummary&&p(".categroySummary",a).fixLineN(e.linesOfCutOfSummary),e.isCutOfSummaryInfo&&p(".p_describeInfo",a).fixLineN(e.linesOfCutOfSummaryInfo),function n(o){var a={id:Number(o.find(".span_onNum").attr("infoDetailId")),appTag:22};p.ajax({type:"GET",url:"/commentViewCount/ajax/updateAndGetViewCount",data:a,async:!1,success:function(a){var e="string"==typeof a?JSON.parse(a):a;e&&200==e.status&&o.find(".p_view").html(e.data)}})}(o),function s(a){p("video",a).addClass("pause"),p("video",a).click(function(){}),p(".p_VideoBg",a).click(function(){p("video",a).hasClass("pause")?(p("video",a).trigger("play"),p("video",a).removeClass("pause"),p("video",a).addClass("play"),p(".p_VideoBg",a).css("display","none")):(p("video",a).trigger("pause"),p("video",a).removeClass("play"),p("video",a).addClass("pause"),p(".p_VideoBg",a).css("display","block"))})}(o);var t;(t=p(".js_videoBox",o).length&&p(".js_videoBox",o).data("videoid")?p(".js_videoBox",o).data("videoid").toString():"")&&function d(e,a,o){var t={ids:o,tenantId:a.tenantId};u(e,a,"/dssresources/videoRepository/getPlayNumByIds",t,"GET",function(a){f(a,e)})}(o,params,t);var i=!1;t&&(p(".js_videoBox",o).each(function(a,e){p(e).on("play",function(a){i||(function n(e,a,o){var t={id:o,tenantId:a.tenantId};u(e,a,"/dssresources/videoRepository/addPlayNumById",t,"GET",function(a){f(a,e)})}(o,params,t),i=!0)})}),p(".js_videoBox",o).each(function(a,e){p(e).on("ended",function(a){i=!1})}))}}});